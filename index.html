<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Rain Mood</title>
        <meta charset="UTF-8">
        <link rel="Stylesheet" type="text/css" href="./common/css/style.css" />
        <link rel="image_src" href="https://media2.giphy.com/media/6XjF2YYHFTkWI/giphy.gif" />
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" /></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
    <audio autoplay loop>
        <source src="./common/audio/Dark Piano - Sociopath.ogg" type="audio/ogg">
    </audio> 
    <audio id="rain" autoplay loop>
        <source src="./common/audio/rain-07.mp3" type="audio/mpeg">
    </audio> 
    <section class="rain"></section>
    <script>
        // number of drops created.
        var nbDrop = 170;

        // function to generate a random number range.
        function randRange(minNum, maxNum) {
            return (Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum);
        }

        // function to generate drops
        function createDrop(dropId, intervalTime) {
            setInterval(function () {
                var dropLeft = randRange(0, 100);
                var dropTop = randRange(1500, 3100);

                $('.rain').append('<div class="drop" id="drop' + dropId + '"></div>');

                $('#drop' + dropId).css({'left': dropLeft + '%'});
                $('#drop' + dropId).css('bottom', dropTop);

                $('#drop' + dropId).animate({"bottom": "0px"}, intervalTime - 100, function () {
                    $(this).remove();
                });

            }, intervalTime);
        }

        // Make it rain
        for (i = 1; i < nbDrop; i++) {
            createDrop(i, randRange(700, 2000));
        }

        var rain = document.getElementById("rain");
        rain.volume = 0.35;

    </script>
</body>
</html>
